<?xml version="1.0" encoding="utf-8"?>
<posts>
    <row Id="3758880" PostTypeId="2" ParentId="3758606" CreationDate="2010-09-21T09:22:21.483" Score="1384" Body="&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Fun fact:&lt;/strong&gt; The original snippet posted here was the most copied Java snippet of all time on Stack Overflow, and it was flawed. It was fixed, but it got messy.&lt;/p&gt;&#xA;&lt;p&gt;Full story in this article: &lt;a href=&quot;https://programming.guide/worlds-most-copied-so-snippet.html&quot; rel=&quot;noreferrer&quot;&gt;The most copied Stack Overflow snippet of all time is flawed!&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;Source: &lt;a href=&quot;http://programming.guide/java/formatting-byte-size-to-human-readable-format.html&quot; rel=&quot;noreferrer&quot;&gt;Formatting byte size to human readable format | Programming.Guide&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1&gt;SI (1 k = 1,000)&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;public static String humanReadableByteCountSI(long bytes) {&#xA;    if (-1000 &amp;lt; bytes &amp;amp;&amp;amp; bytes &amp;lt; 1000) {&#xA;        return bytes + &amp;quot; B&amp;quot;;&#xA;    }&#xA;    CharacterIterator ci = new StringCharacterIterator(&amp;quot;kMGTPE&amp;quot;);&#xA;    while (bytes &amp;lt;= -999_950 || bytes &amp;gt;= 999_950) {&#xA;        bytes /= 1000;&#xA;        ci.next();&#xA;    }&#xA;    return String.format(&amp;quot;%.1f %cB&amp;quot;, bytes / 1000.0, ci.current());&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1&gt;Binary (1 Ki = 1,024)&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;public static String humanReadableByteCountBin(long bytes) {&#xA;    long absB = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes);&#xA;    if (absB &amp;lt; 1024) {&#xA;        return bytes + &amp;quot; B&amp;quot;;&#xA;    }&#xA;    long value = absB;&#xA;    CharacterIterator ci = new StringCharacterIterator(&amp;quot;KMGTPE&amp;quot;);&#xA;    for (int i = 40; i &amp;gt;= 0 &amp;amp;&amp;amp; absB &amp;gt; 0xfffccccccccccccL &amp;gt;&amp;gt; i; i -= 10) {&#xA;        value &amp;gt;&amp;gt;= 10;&#xA;        ci.next();&#xA;    }&#xA;    value *= Long.signum(bytes);&#xA;    return String.format(&amp;quot;%.1f %ciB&amp;quot;, value / 1024.0, ci.current());&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1&gt;Example output:&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;                              SI     BINARY&#xA;&#xA;                   0:        0 B        0 B&#xA;                  27:       27 B       27 B&#xA;                 999:      999 B      999 B&#xA;                1000:     1.0 kB     1000 B&#xA;                1023:     1.0 kB     1023 B&#xA;                1024:     1.0 kB    1.0 KiB&#xA;                1728:     1.7 kB    1.7 KiB&#xA;              110592:   110.6 kB  108.0 KiB&#xA;             7077888:     7.1 MB    6.8 MiB&#xA;           452984832:   453.0 MB  432.0 MiB&#xA;         28991029248:    29.0 GB   27.0 GiB&#xA;       1855425871872:     1.9 TB    1.7 TiB&#xA; 9223372036854775807:     9.2 EB    8.0 EiB   (Long.MAX_VALUE)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;" OwnerUserId="276052" LastEditorUserId="648265" LastEditDate="2020-11-30T10:29:35.070" LastActivityDate="2020-11-30T10:29:35.070" CommentCount="27" ContentLicense="CC BY-SA 4.0" />
    <row Id="9875710" PostTypeId="2" ParentId="5304668" CreationDate="2012-03-26T16:11:16.270" Score="0" Body="&lt;p&gt;I have a nice jQuery Extension perfect for this type of thing at this gist:&lt;/p&gt;&#xA;&#xA;&lt;blockquote&gt;&#xA;  &lt;p&gt;&lt;a href=&quot;https://gist.github.com/2206057&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/2206057&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&#xA;&lt;p&gt;To use it just do something like:&lt;/p&gt;&#xA;&#xA;&lt;pre&gt;&lt;code&gt;$(&quot;#eleID&quot;).cursor(); // will return current cursor state for that element&#xA;$(&quot;#eleID&quot;).cursor(&quot;pointer&quot;); // will change ele cursor to whatever is &quot;&quot;&#xA;$(&quot;#eleID&quot;).cursor(&quot;clear&quot;); // will change ele cursor to default&#xA;$(&quot;#eleID&quot;).cursor(&quot;ishover&quot;); // will return boolean of if mouse is over element or not&#xA;$(&quot;#eleID&quot;).cursor(&quot;position&quot;); // will return cursor's current position in &quot;relation&quot; to element&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&#xA;&lt;p&gt;also &lt;/p&gt;&#xA;&#xA;&lt;pre&gt;&lt;code&gt;$.cursor(&quot;wait&quot;) // will change document cursor to whatever is &quot;&quot;&#xA;$.cursor($(&quot;#eleID&quot;), &quot;wait&quot;); // same as $(&quot;#eleID&quot;).cursor(&quot;wait&quot;);&#xA;$.cursor(&quot;position&quot;) // will return current cursor position&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&#xA;&lt;p&gt;should also mention, if you submit multiple elements like &lt;code&gt;$(&quot;#eleID1, .elementsWiththisClass&quot;)&lt;/code&gt; for &quot;position&quot; and &quot;isHover&quot; then it will return an &lt;code&gt;Array&lt;/code&gt; containing objects like:&lt;/p&gt;&#xA;&#xA;&lt;pre&gt;&lt;code&gt;var poses = $(&quot;#eleID1, .elementsWiththisClass&quot;).cursor(&quot;position&quot;) //  will equal&#xA;poses[0] = {&#xA;    ele: e.fn.e.init[1], // the jquery element&#xA;    x: XXX, //  where XXX is the cursors current position in relation to element&#xA;    y: XXX&#xA;}&#xA;poses[1] = { // ...and so on and so forth for each element&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;" OwnerUserId="900807" LastEditorUserId="900807" LastEditDate="2012-03-26T17:39:49.437" LastActivityDate="2012-03-26T17:39:49.437" CommentCount="0" ContentLicense="CC BY-SA 3.0" />
    <row Id="326440" PostTypeId="2" ParentId="326390" CreationDate="2008-11-28T18:56:13.693" Score="1665" Body="&lt;h2&gt;Read all text from a file&lt;/h2&gt;&#xA;&lt;p&gt;Java 11 added the &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path,java.nio.charset.Charset)&quot; rel=&quot;noreferrer&quot;&gt;readString()&lt;/a&gt; method to read small files as a &lt;code&gt;String&lt;/code&gt;, preserving line terminators:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;String content = Files.readString(path, StandardCharsets.US_ASCII);&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;For versions between Java 7 and 11, here's a compact, robust idiom, wrapped up in a utility method:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;static String readFile(String path, Charset encoding)&#xA;  throws IOException&#xA;{&#xA;  byte[] encoded = Files.readAllBytes(Paths.get(path));&#xA;  return new String(encoded, encoding);&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2&gt;Read lines of text from a file&lt;/h2&gt;&#xA;&lt;p&gt;Java 7 added a &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29&quot; rel=&quot;noreferrer&quot;&gt;convenience method to read a file as lines of text,&lt;/a&gt; represented as a &lt;code&gt;List&amp;lt;String&amp;gt;&lt;/code&gt;. This approach is &amp;quot;lossy&amp;quot; because the line separators are stripped from the end of each line.&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;List&amp;lt;String&amp;gt; lines = Files.readAllLines(Paths.get(path), encoding);&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Java 8 added the &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-java.nio.charset.Charset-&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Files.lines()&lt;/code&gt;&lt;/a&gt; method to produce a &lt;code&gt;Stream&amp;lt;String&amp;gt;&lt;/code&gt;. Again, this method is lossy because line separators are stripped. If an &lt;code&gt;IOException&lt;/code&gt; is encountered while reading the file, it is wrapped in an &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/io/UncheckedIOException.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;UncheckedIOException&lt;/code&gt;&lt;/a&gt;, since &lt;code&gt;Stream&lt;/code&gt; doesn't accept lambdas that throw checked exceptions.&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;try (Stream&amp;lt;String&amp;gt; lines = Files.lines(path, encoding)) {&#xA;  lines.forEach(System.out::println);&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;This &lt;code&gt;Stream&lt;/code&gt; does need a &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#close--&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/a&gt; call; this is poorly documented on the API, and I suspect many people don't even notice &lt;code&gt;Stream&lt;/code&gt; has a &lt;code&gt;close()&lt;/code&gt; method. Be sure to use an ARM-block as shown.&lt;/p&gt;&#xA;&lt;p&gt;If you are working with a source other than a file, you can use the &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#lines--&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;lines()&lt;/code&gt;&lt;/a&gt; method in &lt;code&gt;BufferedReader&lt;/code&gt; instead.&lt;/p&gt;&#xA;&lt;h2&gt;Memory utilization&lt;/h2&gt;&#xA;&lt;p&gt;The first method, that preserves line breaks, can temporarily require memory several times the size of the file, because for a short time the raw file contents (a byte array), and the decoded characters (each of which is 16 bits even if encoded as 8 bits in the file) reside in memory at once. It is safest to apply to files that you know to be small relative to the available memory.&lt;/p&gt;&#xA;&lt;p&gt;The second method, reading lines, is usually more memory efficient, because the input byte buffer for decoding doesn't need to contain the entire file. However, it's still not suitable for files that are very large relative to available memory.&lt;/p&gt;&#xA;&lt;p&gt;For reading large files, you need a different design for your program, one that reads a chunk of text from a stream, processes it, and then moves on to the next, reusing the same fixed-sized memory block. Here, &amp;quot;large&amp;quot; depends on the computer specs. Nowadays, this threshold might be many gigabytes of RAM. The third method, using a &lt;code&gt;Stream&amp;lt;String&amp;gt;&lt;/code&gt; is one way to do this, if your input &amp;quot;records&amp;quot; happen to be individual lines. (Using the &lt;code&gt;readLine()&lt;/code&gt; method of &lt;code&gt;BufferedReader&lt;/code&gt; is the procedural equivalent to this approach.)&lt;/p&gt;&#xA;&lt;h2&gt;Character encoding&lt;/h2&gt;&#xA;&lt;p&gt;One thing that is missing from the sample in the original post is the character encoding. There are some special cases where the platform default is what you want, but they are rare, and you should be able justify your choice.&lt;/p&gt;&#xA;&lt;p&gt;The &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;StandardCharsets&lt;/code&gt;&lt;/a&gt; class defines some constants for the encodings required of all Java runtimes:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;String content = readFile(&amp;quot;test.txt&amp;quot;, StandardCharsets.UTF_8);&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;The platform default is available from &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29&quot; rel=&quot;noreferrer&quot;&gt;the &lt;code&gt;Charset&lt;/code&gt; class&lt;/a&gt; itself:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;String content = readFile(&amp;quot;test.txt&amp;quot;, Charset.defaultCharset());&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr /&gt;&#xA;&lt;p&gt;Note: This answer largely replaces my Java 6 version. The utility of Java 7 safely simplifies the code, and the old answer, which used a mapped byte buffer, prevented the file that was read from being deleted until the mapped buffer was garbage collected. You can view the old version via the &amp;quot;edited&amp;quot; link on this answer.&lt;/p&gt;&#xA;" OwnerUserId="3474" OwnerDisplayName="erickson" LastEditorUserId="3474" LastEditorDisplayName="erickson" LastEditDate="2020-09-28T15:31:38.653" LastActivityDate="2020-09-28T15:31:38.653" CommentCount="35" ContentLicense="CC BY-SA 4.0" />
    <row Id="3758606" PostTypeId="1" AcceptedAnswerId="3758880" CreationDate="2010-09-21T08:42:59.537" Score="655" ViewCount="314879" Body="&lt;p&gt;How can I convert byte size into a human-readable format in Java?&lt;/p&gt;&#xA;&lt;p&gt;Like 1024 should become &amp;quot;1 Kb&amp;quot; and 1024*1024 should become &amp;quot;1 Mb&amp;quot;.&lt;/p&gt;&#xA;&lt;p&gt;I am kind of sick of writing this utility method for each project. Is there a static method in &lt;a href=&quot;https://commons.apache.org/&quot; rel=&quot;noreferrer&quot;&gt;Apache Commons&lt;/a&gt; for this?&lt;/p&gt;&#xA;" OwnerUserId="404615" LastEditorUserId="63550" LastEditDate="2020-08-12T18:33:00.330" LastActivityDate="2022-03-05T20:03:30.670" Title="How can I convert byte size into a human-readable format in Java?" Tags="&lt;java&gt;&lt;formatting&gt;&lt;apache-commons&gt;" AnswerCount="30" CommentCount="8" FavoriteCount="264" ContentLicense="CC BY-SA 4.0" />
    <row Id="5304668" PostTypeId="1" CreationDate="2011-03-14T21:18:39.407" Score="13" ViewCount="13084" Body="&lt;p&gt;I want JavaScript code to detect the mouse cursor type.&lt;/p&gt;&#xA;&lt;p&gt;For example when the cursor hovers in &lt;code&gt;&amp;lt;textarea&amp;gt;&lt;/code&gt; it changes from default to text.&lt;/p&gt;&#xA;&lt;p&gt;How would I go about detecting this?&lt;/p&gt;&#xA;" OwnerUserId="646222" LastEditorUserId="4294399" LastEditDate="2021-12-24T18:13:21.457" LastActivityDate="2021-12-24T18:13:21.457" Title="Detect mouse cursor type" Tags="&lt;javascript&gt;&lt;jquery&gt;&lt;css&gt;&lt;mouse-cursor&gt;" AnswerCount="4" CommentCount="3" FavoriteCount="1" ContentLicense="CC BY-SA 4.0" />
    <row Id="326390" PostTypeId="1" AcceptedAnswerId="326440" CreationDate="2008-11-28T18:32:07.253" Score="1695" ViewCount="1582708" Body="&lt;p&gt;I've been using the idiom below for some time now. And it seems to be the most wide-spread, at least on the sites I've visited.&lt;/p&gt;&#xA;&#xA;&lt;p&gt;Is there a better/different way to read a file into a string in Java?&lt;/p&gt;&#xA;&#xA;&lt;pre&gt;&lt;code&gt;private String readFile(String file) throws IOException {&#xA;    BufferedReader reader = new BufferedReader(new FileReader (file));&#xA;    String         line = null;&#xA;    StringBuilder  stringBuilder = new StringBuilder();&#xA;    String         ls = System.getProperty(&quot;line.separator&quot;);&#xA;&#xA;    try {&#xA;        while((line = reader.readLine()) != null) {&#xA;            stringBuilder.append(line);&#xA;            stringBuilder.append(ls);&#xA;        }&#xA;&#xA;        return stringBuilder.toString();&#xA;    } finally {&#xA;        reader.close();&#xA;    }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;" OwnerUserId="20654" OwnerDisplayName="Oscar Reyes" LastEditorUserId="1746118" LastEditorDisplayName="erickson" LastEditDate="2018-09-12T17:54:58.040" LastActivityDate="2022-02-13T07:18:24.490" Title="How do I create a Java string from the contents of a file?" Tags="&lt;java&gt;&lt;string&gt;&lt;file&gt;&lt;file-io&gt;&lt;io&gt;" AnswerCount="33" CommentCount="14" FavoriteCount="500" ContentLicense="CC BY-SA 3.0" />
    <row Id="3758653" PostTypeId="2" ParentId="3758606" CreationDate="2010-09-21T08:49:16.057" Score="28" Body="&lt;p&gt;I asked the same question recently:&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/3263892/format-file-size-as-mb-gb-etc&quot;&gt;Format file size as MB, GB, etc.&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;While there is no out-of-the-box answer, I can live with the solution:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;private static final long K = 1024;&#xA;private static final long M = K * K;&#xA;private static final long G = M * K;&#xA;private static final long T = G * K;&#xA;&#xA;public static String convertToStringRepresentation(final long value){&#xA;    final long[] dividers = new long[] { T, G, M, K, 1 };&#xA;    final String[] units = new String[] { &amp;quot;TB&amp;quot;, &amp;quot;GB&amp;quot;, &amp;quot;MB&amp;quot;, &amp;quot;KB&amp;quot;, &amp;quot;B&amp;quot; };&#xA;    if(value &amp;lt; 1)&#xA;        throw new IllegalArgumentException(&amp;quot;Invalid file size: &amp;quot; + value);&#xA;    String result = null;&#xA;    for(int i = 0; i &amp;lt; dividers.length; i++){&#xA;        final long divider = dividers[i];&#xA;        if(value &amp;gt;= divider){&#xA;            result = format(value, divider, units[i]);&#xA;            break;&#xA;        }&#xA;    }&#xA;    return result;&#xA;}&#xA;&#xA;private static String format(final long value,&#xA;    final long divider,&#xA;    final String unit){&#xA;    final double result =&#xA;        divider &amp;gt; 1 ? (double) value / (double) divider : (double) value;&#xA;    return new DecimalFormat(&amp;quot;#,##0.#&amp;quot;).format(result) + &amp;quot; &amp;quot; + unit;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Test code:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;public static void main(final String[] args){&#xA;    final long[] l = new long[] { 1l, 4343l, 43434334l, 3563543743l };&#xA;    for(final long ll : l){&#xA;        System.out.println(convertToStringRepresentation(ll));&#xA;    }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Output (on my German locale):&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;1 B&#xA;4,2 KB&#xA;41,4 MB&#xA;3,3 GB&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr /&gt;&#xA;&lt;p&gt;I have opened an &lt;a href=&quot;http://code.google.com/p/guava-libraries/issues/detail?id=428&quot; rel=&quot;nofollow noreferrer&quot;&gt;issue requesting this functionality for Google Guava&lt;/a&gt;. Perhaps someone would care to support it.&lt;/p&gt;&#xA;" OwnerUserId="342852" LastEditorUserId="63550" LastEditDate="2020-08-12T18:41:04.757" LastActivityDate="2020-08-12T18:41:04.757" CommentCount="3" ContentLicense="CC BY-SA 4.0" />
    <row Id="4888400" PostTypeId="2" ParentId="3758606" CreationDate="2011-02-03T15:57:16.907" Score="361" Body="&lt;p&gt;&lt;code&gt;FileUtils.byteCountToDisplaySize(long size)&lt;/code&gt; would work if your project can depend on &lt;code&gt;org.apache.commons.io&lt;/code&gt;.&lt;/p&gt;&#xA;&#xA;&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/FileUtils.html#byteCountToDisplaySize(long)&quot; rel=&quot;noreferrer&quot;&gt;JavaDoc for this method&lt;/a&gt;&lt;/p&gt;&#xA;" OwnerUserId="601806" LastEditorUserId="1248724" LastEditDate="2016-06-07T13:27:35.507" LastActivityDate="2016-06-07T13:27:35.507" CommentCount="5" ContentLicense="CC BY-SA 3.0" />
    <row Id="6046761" PostTypeId="2" ParentId="3758606" CreationDate="2011-05-18T14:53:35.757" Score="9" Body="&lt;pre&gt;&lt;code&gt;&#xA;private static final String[] Q = new String[]{&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;, &quot;P&quot;, &quot;E&quot;};&#xA;&#xA;public String getAsString(long bytes)&#xA;{&#xA;    for (int i = 6; i &gt; 0; i--)&#xA;    {&#xA;        double step = Math.pow(1024, i);&#xA;        if (bytes &gt; step) return String.format(&quot;%3.1f %s&quot;, bytes / step, Q[i]);&#xA;    }&#xA;    return Long.toString(bytes);&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;" OwnerUserId="438960" LastActivityDate="2011-05-18T14:53:35.757" CommentCount="0" ContentLicense="CC BY-SA 3.0" />
</posts>
